---
title: 路由选择协议
date: 2021-05-25 13:37:56
tags:
categories: Network
---

# 自治系统AS概念

AS，英文全称为Autonomous System，中文为自治系统。在互联网中，一个自治系统是指在一个（有时是多个）实体管辖下的所有IP网络和路由器的全体，每个自治系统都被分配一个唯一的自治系统编号（ASN）。各个自治系统通过边界网关协议组成了全球互联网。


# 路由表的生成

路由器中路由表中的路由记录可以有动态路由和静态路由两种。静态路由是由人工配置的，而动态路由是根据路由选择协议自动计算生成的。

# 路由选择协议

路由选择协议分为内部网关协议IGP以及外部网关协议EGP两种。内部网关协议是用在一个自治系统内部的路由选择，外部网关协议是用在不同自治系统间的路由选择，来实现不同自治系统间的互联互通。

（1）内部网关协议IGP

内部网关协议IGP有RIP、OSPF等。

（2）外部网关协议EGP

若源主机和目的主机处在不同的自治系统中（这两个自治系统可能使用不同的内部网关协议），当数据报传到一个自治系统的边界时，就需要使用一种协议将路由选择信息传递到另一个自治系统中。这样的协议就是外部网关协议EGP。目前使用最多的外部网关协议是BGP的版本4。


# 一点闲杂

（1）BGP机房

BGP主要用于互联网AS（自治系统）之间的互联，BGP的最主要功能在于控制路由的传播和选择最好的路由。中国网通 、中国电信、中国铁通和一些大的民营IDC运营商都具有AS号，全国各大网络运营商多数都是通过BGP协议与自身的AS号来实现多线互联的。所谓BGP机房作为一个自治系统（就相当于一个运营商的自治系统），通过BGP协议来与其他运营商互联互通。

BGP机房需要在CNNIC（中国互联网信息中心）或APNIC（亚太网络信息中心）申请自己的IP地址段和AS号，然后通过BGP协议将此段IP地址广播到其它的网络运营商的网络中。

BGP机房的好处是它可以很容易地和各个运营商（包括三大运营商以及一些小运营商）互联互通，避免像一个纯粹的联通IDC在和电信的网络连通时出现这样那样的问题。BGP机房和小运营商可以直接连通，避免需要经过三大运营商的网络来互联。

在实际生产中，有一些所谓的“双线机房”，比如说一个IDC即接入电信的光纤也接入联通的光纤，来实现一个IDC和多个运营商连通。因此，“双线机房”和BGP机房有本质的区别。
